countries = ["Andorra","flags/ad.png","United Arab Emirates","flags/ae.png","Afghanistan","flags/af.png","Antigua and Barbuda","flags/ag.png","Albania","flags/al.png","Armenia","flags/am.png","Angola","flags/ao.png","Argentina","flags/ar.png","Austria","flags/at.png","Australia","flags/au.png","Azerbaijan","flags/az.png","Bosnia and Herzegovina","flags/ba.png","Barbados","flags/bb.png","Bangladesh","flags/bd.png","Belgium","flags/be.png","Burkina Faso","flags/bf.png","Bulgaria","flags/bg.png","Bahrain","flags/bh.png","Burundi","flags/bi.png","Benin","flags/bj.png","Brunei","flags/bn.png","Bolivia","flags/bo.png","Brazil","flags/br.png","Bahamas","flags/bs.png","Bhutan","flags/bt.png","Norway","flags/bv.png","Botswana","flags/bw.png","Belarus","flags/by.png","Belize","flags/bz.png","Canada","flags/ca.png","Dem.Rep. of the Congo","flags/cd.png","Central African Republic","flags/cf.png","Republic of the Congo","flags/cg.png","Switzerland","flags/ch.png","Ivory Coast","flags/ci.png","Chile","flags/cl.png","Cameroon","flags/cm.png","China","flags/cn.png","Colombia","flags/co.png","Costa Rica","flags/cr.png","Cuba","flags/cu.png","Cape Verde","flags/cv.png","Cyprus","flags/cy.png","Czechia","flags/cz.png","Germany","flags/de.png","Djibouti","flags/dj.png","Denmark","flags/dk.png","Dominica","flags/dm.png","Dominican Republic","flags/do.png","Algeria","flags/dz.png", "Ecuador", "flags/ec.png", "Estonia", "flags/ee.png", "Egypt", "flags/eg.png", "Eritrea",  "flags/er.png",  "Spain",  "flags/es.png",  "Ethiopia",  "flags/et.png",  "Finland",  "flags/fi.png",  "Fiji",  "flags/fj.png",  "Micronesia",  "flags/fm.png",  "France",  "flags/fr.png",  "Gabon",  "flags/ga.png",  "England",  "flags/gb-eng.png",  "Northern Ireland",  "flags/gb-nir.png",  "Scotland",  "flags/gb-sct.png",  "Wales",  "flags/gb-wls.png",  "United Kingdom",  "flags/gb.png",  "Grenada",  "flags/gd.png",  "Georgia",  "flags/ge.png",  "Ghana",  "flags/gh.png",  "Greenland",  "flags/gl.png",  "The Gambia",  "flags/gm.png",  "Guinea",  "flags/gn.png",  "Equatorial Guinea",  "flags/gq.png",  "Greece",  "flags/gr.png",  "Guatemala",  "flags/gt.png",  "Guinea Bissau",  "flags/gw.png",  "Guyana",  "flags/gy.png","Hong Kong","flags/hk.png","Honduras","flags/hn.png","Croatia","flags/hr.png","Haiti","flags/ht.png","Hungary","flags/hu.png","Indonesia","flags/id.png","Ireland","flags/ie.png","Israel","flags/il.png","India","flags/in.png","Iraq","flags/iq.png",
"Iran","flags/ir.png","Iceland","flags/is.png","Italy","flags/it.png","Jamaica","flags/jm.png","Jordan","flags/jo.png","Japan", "flags/jp.png", "Kenya", "flags/ke.png", "Kyrgyzstan", "flags/kg.png", "Cambodia", "flags/kh.png", "Kiribati", "flags/ki.png", "Comoros", "flags/km.png", "Saint Kitts and Nevis", "flags/kn.png", "North Korea", "flags/kp.png", "South Korea", "flags/kr.png", "Kuwait", "flags/kw.png", "Kazakhstan", "flags/kz.png", "Laos", "flags/la.png", "Lebanon", "flags/lb.png", "Saint Lucia", "flags/lc.png", "Liechtenstein", "flags/li.png", "Sri Lanka", "flags/lk.png", "Liberia", "flags/lr.png", "Lesotho", "flags/ls.png", "Lithuania", "flags/lt.png", "Luxembourg", "flags/lu.png", "Latvia", "flags/lv.png", "Libya", "flags/ly.png", "Morocco", "flags/ma.png", "Monaco", "flags/mc.png", "Moldova", "flags/md.png", "Montenegro", "flags/me.png", "Madagascar", "flags/mg.png", "Marshall Islands", "flags/mh.png", "North Macedonia", "flags/mk.png", "Mali", "flags/ml.png", "Myanmar", "flags/mm.png", "Mongolia", "flags/mn.png", "Mauritania", "flags/mr.png", "Malta", "flags/mt.png", "Mauritius", "flags/mu.png", "Maldives", "flags/mv.png", "Malawi", "flags/mw.png ", "Mexico", "flags/mx.png", "Malaysia", "flags/my.png", "Mozambique", "flags/mz.png", "Namibia", "flags/na.png", "Niger", "flags/ne.png", "Nigeria", "flags/ng.png", "Nicaragua", "flags/ni.png", "Netherlands", "flags/nl.png", "Norway", "flags/no.png", "Nepal", "flags/np.png", "Nauru", "flags/nr.png", "New Zealand", "flags/nz.png", "Oman", "flags/om.png", "Panama", "flags/pa.png", "Peru", "flags/pe.png", "Papua New Guinea", "flags/pg.png", "Philippines", "flags/ph.png", "Pakistan", "flags/pk.png", "Poland", "flags/pl.png", "Palestine", "flags/ps.png", "Portugal", "flags/pt.png", "Palau", "flags/pw.png", "Paraguay", "flags/py.png", "Qatar", "flags/qa.png", "Romania", "flags/ro.png", "Serbia", "flags/rs.png", "Russia", "flags/ru.png", "Rwanda", "flags/rw.png", "Saudi Arabia", "flags/sa.png", "Somomon Islands", "flags/sb.png", "Seychelles", "flags/sc.png", "Sudan", "flags/sd.png", "Sweden", "flags/se.png", "Singapore", "flags/sg.png", "Slovenia", "flags/si.png", "Slovakia", "flags/sk.png", "Sierra Leone", "flags/sl.png", "San Marino", "flags/sm.png", "Senegal", "flags/sn.png", "Somalia", "flags/so.png", "Suriname", "flags/sr.png", "South Sudan", "flags/ss.png", "Sao Tome and Principe", "flags/st.png", "El Salvador", "flags/sv.png", "Syria", "flags/sy.png", "Eswatini", 
"flags/sz.png", "Togo", "flags/tg.png", "Thailand", "flags/th.png", "Tajikistan", "flags/tj.png", "Timor-Leste", "flags/tl.png", "Turkmenistan", "flags/tm.png", "Tunisia", "flags/tn.png", "Tonga", "flags/to.png", "Turkey", "flags/tr.png", "Trinidad and Tobago", "flags/tt.png", "Tuvalu", "flags/tv.png", "Taiwan", "flags/tw.png", "Tanzania", "flags/tz.png", "Ukraine", "flags/ua.png", "Uganda", "flags/ug.png", "United States of America", "flags/us.png", "Uruguay", "flags/uy.png", "Uzbekistan", "flags/uz.png", "Vatican City", "flags/va.png", "Saint Vincent and the Grenadines", "flags/vc.png", "Venezuela", "flags/ve.png", "Vietnam", "flags/vn.png", "Vanuatu", "flags/vu.png", "Samoa", "flags/ws.png", "Kosovo", "flags/xk.png", "Yemen", "flags/ye.png", "South Africa", "flags/za.png", "Zambia", "flags/zm.png", "Zimbabwe", "flags/zw.png"]

let randomIndex = Math.floor(Math.random()*408)
let index = countries[randomIndex]
let image = false
let flag = document.getElementById('flag')
let score = 0
let scoreP = document.getElementById('score')
let highscore = 0
let highscoreP = document.getElementById('highscore')
let button1 = document.getElementById('button1')
let button2 = document.getElementById('button2')
let button3 = document.getElementById('button3')
let button4 = document.getElementById('button4')
let box = document.getElementById('options')
let button_1 = ""
let button_2 = ""
let button_3 = ""
let button_4 = ""
let options = [button_1, button_2, button_3, button_4]
let answer = ""
let choice = ""



function newCountry() {
    randomIndex = Math.floor(Math.random()*408)
    index = countries[randomIndex]
    image = index.includes("/")
    

    if (image == true) {
        randomIndex --
        index = countries[randomIndex]
    }
}

function newRound() {
    button_1 = ""
    button_2 = ""
    button_3 = ""
    button_4 = ""
    options[0] = ""
    options[1] = ""
    options[2] = ""
    options[3] = ""

    randomIndex = Math.floor(Math.random()*408)
    index = countries[randomIndex]
    image = index.includes("/")
    if (image == false) {
        randomIndex ++
        index = countries[randomIndex]
    }

    flag.src = index

    answer = countries[randomIndex -1]
    options[Math.floor(Math.random()*options.length)] = answer

    for (let i = 0; i < options.length; i++) {
        while (options[i] == "") {
            newCountry()
            options[i] = index

            // checking for duplicates
            for(let j = 0; j < 5; j++)
                if (options[i] == options[i+1]) {
                    newCountry()
                    options[i] = index
                } else if (options[i] == options[i+2]) {
                    newCountry()
                    options[i] = index
                } 
                
                else if (options[i] == options[i+3]) {
                    newCountry()
                    options[i] = index
                } 
                else if (options[i] == options[i-1]) {
                    newCountry()
                    options[i] = index
                } 
                else if (options[i] == options[i-2]) {
                    newCountry()
                    options[i] = index
                } 
                else if (options[i] == options[i-3]) {
                    newCountry()
                    options[i] = index
                } else {
                    break
                }
            
        }
    }
    button1.innerHTML = options[0]
    button2.innerHTML = options[1]
    button3.innerHTML = options[2]
    button4.innerHTML = options[3]

}

function win() {
    score ++
    scoreP.innerHTML = `Score: ${score}`
    newRound()
}

function lose() {
    if (score > highscore) {
        highscore = score
        highscoreP.innerHTML = `HighScore: ${highscore}`
    }
    score = 0
    scoreP.innerHTML = `Score: ${score}`
    newRound()
    
}

function Button1() {
    if (answer == options[0]){
        win()
    } else {
        lose()
    }     
}

function Button2() {
    if (answer == options[1]){
        win()
    } else {
        lose()
    }        
}

function Button3() {
    if (answer == options[2]){
        win()
    } else {
        lose()
    }        
}

function Button4() {
    if (answer == options[3]){
        win()
    } else {
        lose()
    }       
}

newRound()